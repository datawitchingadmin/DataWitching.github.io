
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Basic SQL</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="Basic_SQL"
                  title="Basic SQL"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Summary" duration="0">
        <p>這篇 codelab 想藉由 NYC Citibike 資料，介紹簡單好入門的 SQL 運算，因此需要使用到 NYC Citibike 資料，可以先進入 NYC Citibike 網站下載資料。</p>
<p>NYC Citibike 網站：</p>
<p><a href="https://ride.citibikenyc.com/system-data" target="_blank">https://ride.citibikenyc.com/system-data</a></p>
<p>以下會介紹：</p>
<h2 is-upgraded><strong>SELECT FROM</strong></h2>
<h2 is-upgraded><strong>LIMIT</strong></h2>
<h2 is-upgraded><strong>DESC</strong></h2>
<h2 is-upgraded><strong>ORDER BY</strong></h2>
<h2 is-upgraded><strong>WHERE ... IS NOT NULL</strong></h2>
<h2 is-upgraded><strong>DISTINCT </strong></h2>
<h2 is-upgraded><strong>COUNT</strong></h2>
<h2 is-upgraded><strong>GROUP BY</strong></h2>


      </google-codelab-step>
    
      <google-codelab-step label="開啟 Incorta Notebook" duration="0">
        <p>Schema →  +New →  Material View →  Choose Language →  Edit in Notebook</p>
<p class="image-container"><img style="width: 601.70px" src="img/356270076d4905cd.png"></p>
<p class="image-container"><img style="width: 601.70px" src="img/238a6342279c10c4.png"></p>
<p class="image-container"><img style="width: 601.70px" src="img/16a1d753f747f473.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="瀏覽所有資料 - *" duration="0">
        <p><code>SELECT * FROM [table name]</code></p>
<p>* 代表所有資料</p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT * FROM NYC_CitiBike.tripdata </code></pre>
<aside class="special"><p><strong>TIP: </strong>快捷鍵：shift + Enter →  Run Paragraph</p>
</aside>
<p class="image-container"><img style="width: 601.70px" src="img/637813aa1364c09a.png"></p>
<p class="image-container"><img style="width: 601.70px" src="img/40348379709d3a96.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="僅查看n筆資料 - LIMIT" duration="0">
        <p><code>LIMIT n</code></p>
<p>僅查看 n 筆資料，可以減少系統的運算時間</p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT * FROM NYC_CitiBike.tripdata LIMIT 10 </code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/5e318255f894a24f.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="看table的structure - DESC" duration="0">
        <p><code>DESC [table name]</code></p>
<p>查看 column name 或是 data type，藉由查看資料結構，可以大概了解資料型態，並且對於後續分析也有些幫助。</p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>DESC NYC_CitiBike.tripdata</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/a23ec357905ead68.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="篩選column - SELECT" duration="0">
        <p><code>SELECT column1, column2 FROM [table name]</code></p>
<p>選用 [欄位column] - 學理上叫 projection，刪掉一些不需要的column，排列不同的次序，僅留下需要的欄位</p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT start_station_name, end_station_name 
FROM NYC_CitiBike.tripdata</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/1ed46e7b273f7e7.png"></p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT starttime, stoptime, tripduration
FROM NYC_CitiBike.tripdata</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/9cbb9312e369e373.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="按照順序排列 - ORDER BY" duration="0">
        <p><code>order by [DESC/ ASC]</code></p>
<aside class="warning"><p><strong>NOTE :  </strong></p>
<p>DESC 由大排到小</p>
<p>ASC 由小排到大</p>
<p>若是都不寫，預設則是ASC</p>
</aside>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT starttime, stoptime 
FROM NYC_CitiBike.tripdata 
order by 1, 2</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/35dfeb5180aaccd3.png"></p>
<h2 is-upgraded><strong>Example - 由小到大</strong></h2>
<pre><code>SELECT tripduration 
FROM NYC_CitiBike.tripdata 
order by tripduration</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/4aa836f8ab6accbd.png"></p>
<h2 is-upgraded> <strong>Example</strong> - 由大到小</h2>
<pre><code>SELECT tripduration 
FROM NYC_CitiBike.tripdata 
order by tripduration DESC</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/110954817c73a38c.png"></p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT DISTINCT start_station_name, end_station_name, COUNT(*) 
FROM NYC_CitiBike.tripdata 
where start_station_name is not null
GROUP BY start_station_name, end_station_name
ORDER BY COUNT(*) DESC</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/1d0bac1bd8088210.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="去除null - WHERE" duration="0">
        <p><code>WHERE [column name] IS NOT NULL</code></p>
<p>去除資料的空值，將缺少的資料去除以利計算</p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT start_station_name, end_station_name 
FROM NYC_CitiBike.tripdata 
where start_station_name is not null
ORDER 1,2</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/5117944393c946db.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="去除重複的資料 - DISTINCT" duration="0">
        <p><code>DISTINCT</code> </p>
<p>重複出現的數值或資料，讓他僅出現一次</p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT DISTINCT start_station_name, end_station_name 
FROM NYC_CitiBike.tripdata 
where start_station_name is not null
ORDER BY 1,2</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/996e550a22be26a.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="計算次數 - COUNT()" duration="0">
        <p><code>COUNT( )</code></p>
<p>可以利用 COUNT( ) 計算次數，算出所需資料的筆數，搭配 DISTINCT 還可以計算有多少不同的分類或是種類等等</p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT COUNT(*) FROM NYC_CitiBike.tripdata</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/ae46b635e6898050.png"></p>
<h2 is-upgraded><strong>Example - DSTINCT COUNT</strong></h2>
<pre><code>SELECT COUNT(DISTINCT start_station_id) 
FROM NYC_CitiBike.tripdata</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/d03b66e5ed6d4d5a.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="分類 - GROUP BY" duration="0">
        <p><code>GROUP BY</code></p>
<p>當有任何 <code>aggregation column</code> (聚合函數)時，必須要用 <code>GROUP BY</code> ，除了<code>aggregation column</code> 其他 column 都要放進 <code>GROUP BY</code></p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT DISTINCT start_station_name, end_station_name, COUNT(*) 
FROM NYC_CitiBike.tripdata 
where start_station_name is not null
GROUP BY start_station_name, end_station_name</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/da789842af581406.png"></p>
<h2 is-upgraded><strong>Example</strong></h2>
<pre><code>SELECT DISTINCT start_station_name, end_station_name, COUNT(*) 
FROM NYC_CitiBike.tripdata 
where start_station_name is not null
GROUP BY start_station_name, end_station_name
ORDER BY COUNT(*) DESC</code></pre>
<p class="image-container"><img style="width: 601.70px" src="img/1d0bac1bd8088210.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="SQL Statement 有一定的次序" duration="0">
        <h2 is-upgraded><strong>SELECT...</strong></h2>
<h2 is-upgraded><strong>FROM...</strong></h2>
<h2 is-upgraded><strong>WHERE...</strong></h2>
<h2 is-upgraded><strong>GROUP BY... </strong></h2>
<h2 is-upgraded><strong>HAVING...</strong></h2>
<h2 is-upgraded><strong>ORDER BY...</strong></h2>
<aside class="warning"><p><strong>NOTE :  </strong>次序不能改變！</p>
</aside>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
